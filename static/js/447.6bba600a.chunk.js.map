{"version":3,"file":"static/js/447.6bba600a.chunk.js","mappings":"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","sources":["components/portfolio/WriteComment.jsx","components/portfolio/Comment.jsx","pages/PortfolioDetail.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport styled from 'styled-components'\nimport Input from '../common/Input';\nimport { StyleBackgroundButton, StyleBorderButton } from '../common/Buttons';\nimport ProGress from '../common/ProGress';\nimport api from '../../hooks/useAxiosInterceptor'\nimport { useParams } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport { updateUser } from '../../redux/userForm/userSlice';\n\nconst StyleWriteComment = styled.div`\n    width:100%;\n    .submit-box {\n        margin-top:2rem;\n        margin-left:auto;\n    }\n\n    .col {\n        gap:1rem;\n    }\n`\n\nexport default function WriteComment({\n    updateHandler,\n}) {\n    const [comments,setComments] = useState('');\n    const {portfolioId} = useParams();\n    const loginUserdata = useSelector(state=>state.user);\n\n    const submitHandler = () => {\n        const body = {\n            memberId : loginUserdata.userInfo.memberId,\n            portfolioId : portfolioId,\n            body : comments \n        }\n        api.post('/comments',body)\n        .then(res=>{\n            updateHandler();\n            setComments('');\n        })\n        .catch(err=>{\n        })\n    }\n\n    const commentsHandler = (e) => {\n        setComments(e.target.value);\n    }\n\n    const keyDownHandler = (e) => {\n        if (e.code === 'Enter' || e.code === 'NumpadEnter') {\n            e.preventDefault();\n            submitHandler();\n        }\n    }\n\n    return (\n        <StyleWriteComment className='col'>\n            <Input \n                label={'댓글 작성'}\n                fontSize={'1.6rem'}\n                height={'8rem'}\n                maxLength={200}\n                type='textarea'\n                value={comments}\n                onChangeHandler={commentsHandler}\n                // onKeyDown={keyDownHandler}\n            />\n            <ProGress\n                comPleteNum={200}\n                proGressNum={comments.length}\n                top='-1.8rem'\n                width='100%'\n                height='1rem'\n            />\n            <div className='submit-box row'>\n                <StyleBackgroundButton\n                    $width={'15rem'}\n                    $fontSize={'1.6rem'}\n                    onClick={submitHandler}\n                >작성</StyleBackgroundButton>\n            </div>\n        </StyleWriteComment>\n    );\n}\n\n\n","import React, { useEffect, useState } from 'react';\nimport { StyleDetailContainer } from '../../pages/ProjectDetail';\nimport WriteComment from './WriteComment';\nimport SeeComment from './SeeComment';\nimport { useSelector } from 'react-redux';\n\nexport default function Comment({\n    isAdmin,\n    detailData,\n    updateHandler\n}) {\n    const loginUserData = useSelector(state=>state.user);\n    return (\n        <StyleDetailContainer\n            id='comment'\n            className='col'\n        >\n            {loginUserData.isLogin && \n            <WriteComment\n                updateHandler={updateHandler}\n            />}\n            {detailData.comments.map((item,idx,arr)=>\n                <SeeComment\n                    key={arr.length-idx-1}\n                    isAdmin={isAdmin}\n                    detailData={detailData}\n                    commentData={arr[arr.length-idx-1]}\n                    updateHandler={updateHandler}\n                />\n            )}\n        </StyleDetailContainer>\n    );\n}\n\n","import React, { useEffect, useState } from 'react';\nimport styled from 'styled-components'\nimport DetailHead from '../components/PfPjPublic/DetailHead';\nimport DetailBody from '../components/PfPjPublic/DetailBody';\nimport { StyleBackgroundButton, StyleBorderButton } from '../components/common/Buttons';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { StyleDetailWrapper, StyleDetailContainer } from './ProjectDetail';\nimport Comment from '../components/portfolio/Comment';\nimport useNav from '../hooks/useNav';\nimport Modal from '../components/common/Modal';\nimport api from '../hooks/useAxiosInterceptor'\nimport SuspenseDetailPage from '../components/PfPjPublic/DetailSkeletonLoading';\nimport { shapingApiData } from '../utils/shapingApiData';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport NotFound from './NotFound';\n\nconst OnlyAdmin = styled.div`\n  width:100%;\n  justify-content:end;\n  gap:2rem;\n  margin-bottom:1rem;\n`\n\nconst DummyData = {\n  \"memberId\": 1,\n  \"userName\": \"한휘용\",\n  \"userImgUrl\": null,\n  \"portfolioId\": 1,\n  \"title\": \"제목1\",\n  \"body\": \"내용1\",\n  \"view\": 1,\n  \"createdAt\": \"2023-09-13T10:16:03.452348\",\n  \"modifiedAt\": \"2023-09-13T10:17:17.7792741\",\n  \"comments\": [],\n  \"tags\": [\n      \"aaa\",\n      \"bbb\",\n      \"ccc\"\n  ],\n  \"lang\": \"C\",\n  \"heartCount\": 0,\n  \"isComment\": true,\n  \"isEmploy\": true\n}\n\nexport default function ProjectDetail() {\n  const navigate = useNavigate();\n  const [update, setUpdate] = useState(false);\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [detailData, setDetailData] = useState(DummyData);\n  const [apiResult, setApiResult] = useState('');\n\n  const [isDeleteModal,setIsDeleteModal] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [showModal, setShowModal] = useState(false);\n  const [deleteApiResult, setDeleteApiResult] = useState(false);\n  const {toPortfolioEdit, toPortfolio} = useNav();\n\n  const loginUserData = useSelector(state=>state.user);\n  const fontSize = '1.6rem'\n  const {portfolioId} = useParams();\n\n  const updateHandler = () => {\n    setUpdate((prev)=>!prev);\n  }\n\n  const adminFunction = [\n    {\n      title : '수정',\n      handler : ()=>{\n        toPortfolioEdit(detailData.portfolioId);\n      },\n    },{\n      title : '삭제',\n      handler : ()=>{\n        setShowModal(true);\n        setIsDeleteModal(true);\n        setApiResult('해당 프로젝트를 삭제하시겠습니까?');\n      },\n    }\n  ]\n\n  const fetchData = () => {\n    setIsLoading(true);\n    api.get(`/portfolios/${portfolioId}`)\n    .then(res=>{\n      setIsLoading(false);\n      setDetailData(shapingApiData(res.data.data));\n    })\n    .catch(err=>{\n      if(err.code === 'ERR_BAD_REQUEST') {\n        setApiResult(false);\n      } else if (err.code === 'ERR_BAD_RESPONSE'){\n        setApiResult(false);\n        setIsDeleteModal(true);\n      }\n    })\n    .finally(()=>setIsLoading(false));\n  }\n\n  const fetchDeletPortfolio = (id) => {\n    setIsDeleteModal(true);\n    setShowModal(true);\n    api.delete(`/portfolios/${id}`)\n    .then(res=>{\n      setIsDeleteModal(false);\n      setDeleteApiResult(true);\n      setApiResult('포트폴리오를 삭제했습니다. 확인 버튼 클릭시 포트폴리오 리스트로 돌아갑니다.')\n    })\n    .catch(err=>{\n      // if(err.code === 'ERR_BAD_REQUEST')\n      setIsDeleteModal(false);\n      setDeleteApiResult(false);\n      setApiResult('포트폴리오 삭제에 실패했습니다. 다시 시도해 주세요')\n    })\n    .finally(()=>setShowModal(true));\n  }\n\n  useEffect(()=>{\n    fetchData()\n  },[update])\n\n  useEffect(()=>{\n    if(loginUserData.userInfo?.memberId === detailData?.memberId) {\n      setIsAdmin(true);\n    } else {\n      setIsAdmin(false);\n    }\n  },[detailData])\n\n  return (\n    <>\n    {apiResult === false ? <NotFound/> :\n    <StyleDetailWrapper>\n      {showModal &&\n          <Modal\n            type={isDeleteModal ? 'confirm' : 'alert'}\n            setIsOpen={setShowModal}\n            title={'알림'}\n            body={apiResult}\n            confirmHandler={()=>isDeleteModal ? fetchDeletPortfolio(portfolioId) : deleteApiResult ? toPortfolio() : setShowModal(false)}\n          />}\n      {isLoading\n      ? <SuspenseDetailPage/>\n      : <StyleDetailContainer className='col'>\n        <DetailHead detailData={detailData} type='portfolio'/>\n        {isAdmin && \n        <OnlyAdmin className='row'>\n          {adminFunction.map((item,idx)=>\n            <StyleBackgroundButton\n              key={idx}\n              $fontSize={fontSize}\n              onClick={()=>item.handler()}\n            >\n              {item.title}\n            </StyleBackgroundButton>\n          )}\n        </OnlyAdmin>}\n        <DetailBody\n          detailData={detailData} \n          type='portfolio'\n          isAdmin={isAdmin}\n          updateHandler={updateHandler}\n          portfolioId={portfolioId}\n        />\n      </StyleDetailContainer>\n      }\n      {Number(detailData.isComment) === 1 &&\n        <Comment\n          updateHandler={updateHandler}\n          isAdmin={isAdmin}\n          detailData={detailData}\n        />\n      }\n    </StyleDetailWrapper>\n    }\n    </>\n  );\n}\n"],"names":["StyleWriteComment","styled","div","_templateObject","_taggedTemplateLiteral","WriteComment","_ref","updateHandler","_useState","useState","_useState2","_slicedToArray","comments","setComments","portfolioId","useParams","loginUserdata","useSelector","state","user","submitHandler","body","memberId","userInfo","api","post","then","res","catch","err","_jsxs","className","children","_jsx","Input","label","fontSize","height","maxLength","type","value","onChangeHandler","e","target","ProGress","comPleteNum","proGressNum","length","top","width","StyleBackgroundButton","$width","$fontSize","onClick","Comment","isAdmin","detailData","loginUserData","StyleDetailContainer","id","isLogin","map","item","idx","arr","SeeComment","commentData","OnlyAdmin","DummyData","ProjectDetail","useNavigate","update","setUpdate","_useState3","_useState4","setIsAdmin","_useState5","_useState6","setDetailData","_useState7","_useState8","apiResult","setApiResult","_useState9","_useState10","isDeleteModal","setIsDeleteModal","_useState11","_useState12","isLoading","setIsLoading","_useState13","_useState14","showModal","setShowModal","_useState15","_useState16","deleteApiResult","setDeleteApiResult","_useNav","useNav","toPortfolioEdit","toPortfolio","prev","adminFunction","title","handler","useEffect","get","concat","shapingApiData","data","code","finally","_loginUserData$userIn","_Fragment","NotFound","StyleDetailWrapper","Modal","setIsOpen","confirmHandler","delete","SuspenseDetailPage","DetailHead","DetailBody","Number","isComment"],"sourceRoot":""}